# Le DOM

## CONTEXTE

Le DOM (Document Object Model) est une technologie Javascript frontend Ã©troitement liÃ©e Ã  HTML et CSS.

Il permet de dynamiser une page HTML en ajoutant, modifiant ou supprimant des Ã©lÃ©ments grÃ¢ce Ã  diffÃ©rentes instructions Javascript.

## FONCTIONNEMENT

La manipulation du DOM peut se rÃ©sumer en deux mots:

- Cibler
- Transformer
- Tout commence par le ciblage dâ€™un ou des Ã©lÃ©ments HTML que vous souhaitez transformer.

## ENVIRONNEMENT JS FRONTEND

Les instructions modifiant un fichier HTML s'Ã©crivent dans un fichier JS, 
pour que tout fonctionne correctement il ne faut pas oublier de lier les deux fichiers.

La liaison se fait avec une balise script avec comme source le nom du fichier javascript. 
Celle-ci se place Ã  la fin du body du fichier HTML.

```html
<!DOCTYPE html>
<html>
 <head>
 </head>
 <body>
   <script src="script.js"></script>
 </body>
</html>
```

Comment vÃ©rifier si la liaison est bien effective ?

Dans lâ€™onglet ```â€œNetworkâ€``` de votre inspecteur dâ€™Ã©lÃ©ments, un status 200 indique que le fichier script a bien Ã©tÃ© chargÃ©.

![alt img66](/images/courses/level1/img66.png)

## CIBLER UN ELEMENT HTML

Gardez comme exemple le code HTML ci-dessous pour illustrer les diffÃ©rentes faÃ§ons de cibler des Ã©lÃ©ments.

```html
<body>
 <ul class="todo">
   <li id="t1">Go to ğŸ‘'</li>
   <li id="t2">Lesson ğŸ¾</li>
 </ul>
</body>
```
***Avec un sÃ©lecteur de balise***

```script.js```

```js
document.querySelector('li');
```

***Balise ciblÃ©e***

```html
<li id="t1">Go to ğŸ‘</li>
```

La propriÃ©tÃ© ```querySelector``` retourne le premier Ã©lÃ©ment trouvÃ©.

***Avec un sÃ©lecteur de classe***

```script.js```

```js
document.querySelector('.todo');
```

***Balises ciblÃ©es***

```html
<ul class="todo">
 <li id="t1">Go to ğŸ‘'</li>
 <li id="t2">Lesson ğŸ¾</li>
</ul>
```

***Avec un sÃ©lecteur dâ€™ID***

```script.js```

```js
document.querySelector('#t2');
```

***Balise ciblÃ©e***

```html
<li id="t2">Lesson ğŸ¾</li>
```

***Avec un sÃ©lecteur contextuel***

```script.js```

```js
document.querySelector('ul.todo > #t1');
```

***Balise ciblÃ©e***

```html
<li id="t1">Go to ğŸ‘'</li>
```

***Raccourci pour cibler le body***

```js
document.body;
```

***Balises ciblÃ©es***

```html
<body>
 <ul class="todo">
   <li id="t1">Go to ğŸ‘'</li>
   <li id="t2">Lesson ğŸ¾</li>
 </ul>
</body>
```

## OPERATION CRUD SUR UN ELEMENT

Maintenant que votre Ã©lÃ©ment est ciblÃ©, vous allez pouvoir interagir avec cet Ã©lÃ©ment pour effectuer une des quatre opÃ©rations de base, 
les opÃ©rations CRUD (create, read, update, delete).

GrÃ¢ce Ã  ces opÃ©rations, nous allons pouvoir modifier le DOM dynamiquement :

- ***Create*** : ajouter un Ã©lÃ©ment
- ***Read*** : lire le contenu dâ€™un Ã©lÃ©ment
- ***Update*** : modifier un Ã©lÃ©ment
- ***Delete*** : supprimer un Ã©lÃ©ment

Conservez le code HTML ci-dessous pour explorer les diffÃ©rentes opÃ©rations CRUD.

```html
<body>
 <ul class="todo">
   <li id="t1">Go to ğŸ‘'</li>
   <li id="t2">Lesson ğŸ¾</li>
 </ul>
</body>
```

***AccÃ©der au contenu dâ€™un Ã©lÃ©ment***

```script.js```
```js
document.querySelector('#t1').textContent;
```

***RÃ©sultat***

```html
Go to ğŸ‘
```

***Modifier le contenu dâ€™un Ã©lÃ©ment***

```script.js```

```js
document.querySelector('#t1').textContent = 'Take ğŸ’Š';
```

***RÃ©sultat***

```html
<body>
 <ul class="todo">
   <li id="t1">Take ğŸ’Š</li>
   <li id="t2">Lesson ğŸ¾</li>
 </ul>
</body>
```

***Supprimer un Ã©lÃ©ment***

```script.js```

```js
document.querySelector('#t1').remove();
```

***RÃ©sultat***

```html
<body>
 <ul class="todo">
   <li id="t2">Lesson ğŸ¾</li>
 </ul>
</body>
```

***CrÃ©er des Ã©lÃ©ments***

```script.js```

```js
document.querySelector('#todo').innerHTML += `
 <li>Book Club ğŸ“–</li>

  <li>Lunch ğŸ•</li>
`;
```

Lâ€™utilisation des ```backticks``` permet de faciliter la mise en page et la crÃ©ation de chaÃ®ne de caractÃ¨res avec des sauts de ligne.

***RÃ©sultat***

```html
<body>
 <ul id="todo">
   <li id="t1">Go to ğŸ‘</li>
   <li id="t2">Lesson ğŸ¾</li>
   <li>Book Club ğŸ“–</li>
   <li>Lunch ğŸ•</li>
 </ul>
</body>
```

## CIBLER PLUSIEURS ELEMENTS

Nous avons vu prÃ©cÃ©demment comment cibler un Ã©lÃ©ment de notre DOM. 
Il est Ã©galement possible de cibler un ensemble dâ€™Ã©lÃ©ments pour interagir avec chacun dâ€™eux.

***Avec un sÃ©lecteur de balise***

```script.js```

```js
document.querySelectorAll('li');
```

***RÃ©sultat***

```html
<li>Go to ğŸ‘</li>

<li>Lesson ğŸ¾</li>
```

Le rÃ©sultat est retournÃ© sous la forme dâ€™un tableau dâ€™Ã©lÃ©ments.

***Avec un sÃ©lecteur de classe***

```index.html```

```html
<body>
 <ul class="todo">
   <li>Go to ğŸ‘</li>
   <li>Lesson ğŸ¾</li>
 </ul>

  <ul class="todo">
   <li>Book Club ğŸ“–</li>
   <li>Lunch ğŸ•</li>
 </ul>
</body>
```

```script.js```

```js
document.querySelectorAll('.todo');
```

***RÃ©sultat***

```html
<ul class="todo">
 <li>Go to ğŸ‘</li>
 <li>Lesson ğŸ¾</li>
</ul>
<ul class="todo">
 <li>Book Club ğŸ“–</li>
 <li>Lunch ğŸ•</li>
</ul>
```
Le rÃ©sultat est retournÃ© sous la forme dâ€™un tableau dâ€™Ã©lÃ©ments.

## MANIPULER UN TABLEAU Dâ€™ELEMENTS

Le nombre dâ€™Ã©lÃ©ments dâ€™un tableau
La longueur du tableau indique le nombre dâ€™Ã©lÃ©ments ciblÃ©s par la recherche.

```index.html```

```html
<body>
 <ul class="todo">
   <li>Go to ğŸ‘</li>
   <li>Lesson ğŸ¾</li>
 </ul>
</body>
```

```script.js```

```js
document.querySelectorAll('li').length;
```

***RÃ©sultat***

```js 
2
```

***Parcourir un tableau***

Il est possible de boucler sur un tableau et, pour chaque Ã©lÃ©ment HTML, dâ€™afficher son texte dans la console du navigateur.

```js
const todos = document.querySelectorAll('li');

for (let i = 0; i < todos.length; i++) {
 console.log(todos[i].textContent);
}
```

## PARCOURIR LE DOM

Parcourir le DOM permet de naviguer Ã  lâ€™intÃ©rieur de la page HTML pour aller chercher des Ã©lÃ©ments plus 
en profondeur (Ã©lÃ©ments enfants) ou remonter vers des Ã©lÃ©ments plus hauts (Ã©lÃ©ments parents).

**AccÃ©der Ã  lâ€™Ã©lÃ©ment parent**
```index.html```

```html
<body>
 <ul>
   <li id="t1">Go to ğŸ‘</li>
   <li id="t2">Lesson ğŸ¾</li>
 </ul>
</body>
```

```script.js```

```js
document.querySelector('#t1').parentNode;
```
***RÃ©sultat***
```html
<ul>
 <li id="t1">Go to ğŸ‘</li>
 <li id="t2">Lesson ğŸ¾</li>
</ul>
```

***Supprimer lâ€™Ã©lÃ©ment parent***

```index.html```

```html
<body>
 <ul>
   <li id="t1">Go to ğŸ‘</li>
   <li id="t2">Lesson ğŸ¾</li>
 </ul>
</body>
```
```script.js```

```js
document.querySelector('#t1').parentNode.remove();
```

***RÃ©sultat***

```html
<body>
</body>
```

***AccÃ©der au parent du parent***

```index.html```

```html
<body>
 <ul>
   <li id="t1">Go to ğŸ‘</li>
   <li id="t2">Lesson ğŸ¾</li>
 </ul>
</body>
```

```script.js```

```js
document.querySelector('#t1').parentNode.parentNode;
```

***RÃ©sultat***

```html
<body>
 <ul>
   <li id="t1">Go to ğŸ‘</li>
   <li id="t2">Lesson ğŸ¾</li>
 </ul>
</body>
```

***AccÃ©der aux Ã©lÃ©ments enfants***

```index.html```

```html
<body>
 <ul>
   <li id="t1">Go to ğŸ‘</li>
   <li id="t2">Lesson ğŸ¾</li>
 </ul>
</body>
```

```script.js```

```js
document.querySelector('#todo').children;
```

***RÃ©sultat***

```html
<li id="t1">Go to ğŸ‘</li>
<li id="t2">Lesson ğŸ¾</li>
```

***AccÃ©der au premier enfant***

```index.html```

```html
<body>
 <ul>
   <li id="t1">Go to ğŸ‘</li>
   <li id="t2">Lesson ğŸ¾</li>
 </ul>
</body>
```

```script.js```

```js
document.querySelector('#todo').firstElementChild;
```

***RÃ©sultat***

```html
<li id="t1">Go to ğŸ‘</li>
```

***AccÃ©der au dernier enfant***

```index.html```

```html
<body>
 <ul id="todo">
   <li>Go to ğŸ‘</li>
   <li>Lesson ğŸ¾</li>
 </ul>
</body>
```

```script.js```

```js
document.querySelector('#todo').lastElementChild;
```

***RÃ©sultat***

```html
<li>Lesson ğŸ¾</li>
```

***AccÃ©der Ã  lâ€™Ã©lÃ©ment suivant***

```index.html```

```html
<body>
 <ul id="todo">
   <li id="t1">Go to ğŸ‘</li>
   <li id="t2">Lesson ğŸ¾</li>
 </ul>
</body>
```

```script.js```

```js
document.querySelector('#t1').nextElementSibling;
```

***RÃ©sultat***

```html
<li id="t2">Lesson ğŸ¾</li>
```

***AccÃ©der Ã  lâ€™Ã©lÃ©ment prÃ©cÃ©dent***

```index.html```

```html
<body>
 <ul id="todo">
   <li id="t1">Go to ğŸ‘</li>
   <li id="t2">Lesson ğŸ¾</li>
 </ul>
</body>
```

```script.js```

```js
document.querySelector('#t2').previousElementSibling;
```

***RÃ©sultat***

```html
<li id="t1">Go to ğŸ‘</li>
```

***Ã‰lÃ©ments inaccessibles***

Si lâ€™Ã©lÃ©ment ciblÃ© nâ€™existe pas, la propriÃ©tÃ© utilisÃ©e renverra null.

```index.html```

```html
<body>
 <ul id="todo">
   <li id="t1">Go to ğŸ‘</li>
   <li id="t2">Lesson ğŸ¾</li>
 </ul>
</body>
```

```script.js```

```js
document.querySelector('#todo').parentNode.parentNode;
```

***RÃ©sultat***

```js
null
```