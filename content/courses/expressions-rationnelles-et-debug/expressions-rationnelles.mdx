# Expression rationnelles et debug

## CONTEXTE

Les expressions rationnelles (ou expressions rÃ©guliÃ¨res / regex) sont des outils qui permettent de faire des recherches complexes et totalement configurables Ã  lâ€™intÃ©rieur dâ€™une chaÃ®ne de caractÃ¨re et de vÃ©rifier, modifier ou analyser un texte.

Imaginez que vous vouliez modÃ©rer les messages dâ€™injures sur un chat.

Message :

![alt img25](/images/courses/level1/img25.png)

Message modÃ©rÃ© :

![alt img26](/images/courses/level1/img26.png)

Sans les expressions rationnelles, le traitement dâ€™une chaÃ®ne de caractÃ¨re est assez fastidieux.

```js
const message = 'Your website is so boring !! ğŸ¤¬'
const messageInArray = message.split(' ');
let newMessage = '';

for (let i = 0; i < messageInArray.length; i++) {
 if (messageInArray[i] === 'boring') {
   newMessage += '****** ';
 } else {
   newMessage += messageInArray[i] + ' ';
 }
}

console.log(newMessage);
```

## FONCTIONNEMENT

Toute crÃ©ation dâ€™une regex dÃ©marre par la dÃ©finition dâ€™un pattern qui correspond Ã  un modÃ¨le quâ€™il faut trouver dans un texte.

Par exemple, trouvez tous les numÃ©ros de tÃ©lÃ©phone contenus dans ce message.

![alt img27](/images/courses/level1/img27.png)

Une fois la chaÃ®ne de caractÃ¨re ciblÃ©e avec un pattern, trois opÃ©rations sont possibles :

- ***Tester***
![alt img28](/images/courses/level1/img28.png)

- ***Extraire***
![alt img29](/images/courses/level1/img29.png)

- ***Remplacer***
![alt img30](/images/courses/level1/img30.png)

## STEP BY STEP

***Syntaxe dâ€™un pattern***

Un pattern est toujours dÃ©fini entre / /


```js
/pattern/
```

***Regex simple***

Par exemple, vÃ©rifier si un texte commence par "Hello", indÃ©pendamment de la casse.

```js
const message = 'HELLO world';
const pattern = /^hello/i;

const found = pattern.test(message);
console.log(found);
```

***RÃ©sultat***

```js
true
```

Pour chercher si un texte commence par un mot prÃ©cis, il faut utiliser le limiteur ^ :

```js
const str = "Hello world";

const pattern = /^world/;


// Aucun rÃ©sultat
```

Pour chercher si un texte termine par un mot prÃ©cis, il faut utiliser le limiteur $ :

```js
const str = "Hello world";

const pattern = /world$/;


// world
```

***Recherche simple dâ€™un mot dans un texte:***

```js
const str = "Hello world, I said HELLO";

const pattern = /hello/;


// Aucun rÃ©sultat
```

Insensible Ã  la casse (ne prend pas en compte majuscule et minuscule) :

```js
const str = "Hello world, I said HELLO";

const pattern = /hello/i;

// Hello
```

Recherche globale en cumulant lâ€™option dâ€™insensibilitÃ© Ã  la casse :

```js
const str = "Hello world, I said HELLO";

const pattern = /hello/gi;

// Hello et HELLO
```

***Regex avancÃ©e***

Par exemple, vÃ©rifier la prÃ©sence dâ€™un numÃ©ro de tÃ©lÃ©phone.

```js
const message = 'I give you my number: 0612345678 bye! ğŸ˜‰';
const message2 = 'Text me on 061234';

const pattern = /06[0-9]{8}/;
console.log(pattern.test(message));

console.log(pattern.test(message2));
```

***RÃ©sultat***

```js
true

false
```

***Rechercher plusieurs caractÃ¨res :***

```js
const str = "My number: 0612345678";
const pattern = /num.*/;

// number: 0612345678
```

***Rechercher uniquement des lettres dÃ©marrant par num :***

```js
const str = "My number: 0612345678";
const pattern = /num[a-z]*/;

// number
```

***Rechercher uniquement des chiffres dÃ©marrant par 06:***

```js
const str = "My number: 0612345678";
const pattern = /06[0-9]*/;

// 0612345678
```

***Rechercher un certain nombre de caractÃ¨res, par exemple 2 chiffres aprÃ¨s 06 :***

```js
const str = "My number: 0612345678";
const pattern = /06[0-9]{2}/;

// 0612
```

***Rechercher un certain nombre de caractÃ¨res, par exemple 3 lettres aprÃ¨s num :***

```js
const str = "My number: 0612345678";
const pattern = /num[a-z]{3}/;

// number
```

***En rÃ©sumÃ©***

- ***/ /*** permet de dÃ©finir un modÃ¨le de recherche

- ***. (point)*** est un caractÃ¨re joker qui dÃ©signe nâ€™importe quel caractÃ¨re

- ***\* (Ã©toile)*** est un caractÃ¨re joker qui prÃ©cise que le caractÃ¨re cherchÃ© peut apparaÃ®tre aucune ou plusieurs fois Ã  la suite

- ***[a-z]*** est un joker qui dÃ©signe nâ€™importe quel caractÃ¨re compris entre a et z

- ***[0-9]*** est un joker qui dÃ©signe nâ€™importe quel caractÃ¨re compris entre 0 et 9

- ***+*** est un caractÃ¨re joker similaire au caractÃ¨re joker * mais qui prÃ©cise que le caractÃ¨re cherchÃ© peut apparaÃ®tre au moins une fois ou plusieurs fois Ã  la suite

- ***^*** signifie que le texte doit commencer par le modÃ¨le de recherche

- ***$*** signifie que le texte doit toujours finir par le modÃ¨le de recherche

- ***//g*** permet une recherche globale

- ***//i*** permet une recherche qui ne prend pas en compte la casse

***Extraire***
Les regex permettent Ã©galement dâ€™extraire une partie dâ€™un texte, par exemple tous les numÃ©ros de tÃ©lÃ©phone.

```js
const message = `You can call me at :
0612345678 or 0698765432
Or this one ğŸ˜‰ 0607080910`;

const pattern = /06*[0-9]{8}/g;
const phoneNumbers = message.match(pattern);
console.log(phoneNumbers[0]);
console.log(phoneNumbers[1]);
```

***RÃ©sultat***

```js
0612345678
0698765432
0607080910
```

***Remplacer***

Le remplacement dâ€™un texte censurÃ© peut aussi Ãªtre fait avec des regex, cela Ã©vite dâ€™utiliser des boucles ou autre traitement fastidieux..

```js
let message = 'Your website is so BORING !! ğŸ¤¬';
const pattern = /boring/i;

const newMessage = message.replace(pattern, '******');
console.log(newMessage);
```

***RÃ©sultat***

```js
Your website is so ****** !! ğŸ¤¬
```

***Tester vos regex***

Les expressions rationnelles demandent de l'entraÃ®nement. En attendant de devenir un expert, 
vous pouvez vous aider de sites comme [regexr.com](regexr.com) pour tester vos regex.